var CFFlakeManager={flakes:[],currentFlakeId:0,currentFlakeHeight:0,lastFlakeId:0,lastFlakeHeight:0,resizeTimerId:null,init:function(){if(CFFlakeManager.resizeTimerId==null){CFFlakeManager.resizeTimerId=window.setInterval(CFFlakeManager.resizeFlakes,500)}},resizeFlakes:function(){CFFlakeManager.retrieveFlakeIdAndHeight();if((CFFlakeManager.currentFlakeId!=CFFlakeManager.lastFlakeId)||(CFFlakeManager.currentFlakeHeight!=CFFlakeManager.lastFlakeHeight)){var A=document.getElementById("pffid"+CFFlakeManager.currentFlakeId.toString());A.style.height=CFFlakeManager.currentFlakeHeight.toString()+"px";CFFlakeManager.lastFlakeId=CFFlakeManager.currentFlakeId;CFFlakeManager.lastFlakeHeight=CFFlakeManager.currentFlakeHeight}},retrieveFlakeIdAndHeight:function(){if(window.location.hash.length==0){return}var C=window.location.hash.substring(1);if((C==null)||(C.length==0)){return}var E=C.split("&");if((E!=null)&&(E.length>0)){for(var B=0;B<E.length;B++){var F=E[B].split("=");if((F!=null)&&(F.length>0)){if(F[0]=="FlakeId"){var D=parseInt(F[1]);if(!isNaN(D)){CFFlakeManager.currentFlakeId=D}}else{if(F[0]=="Height"){var A=parseInt(F[1]);if(!isNaN(A)){CFFlakeManager.currentFlakeHeight=A;CFFlakeManager.currentFlakeHeight+=15}}}}}}}};function registerFlake(A){if((A.id==null)||(A.id.length==0)){return}if(CFFlakeManager.flakes[A.id]!=null){alert("You can not have more than one instance of the same flake running in the same page.");A.parentNode.removeChild(A);return}var C=location.href;var B=C.indexOf("#");if(B>-1){C=C.substring(0,B)}CFFlakeManager.flakes[A.id]=A.src;A.contentWindow.location=CFFlakeManager.flakes[A.id]+"#"+C}window.setTimeout(CFFlakeManager.init,100);